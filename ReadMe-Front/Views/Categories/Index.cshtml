@using ReadMe_Front.Models.ViewModels
@model  List<CategoryVm>

@{
    ViewBag.Title = "Index";
}

<style>
        .list-group-item a {
            text-decoration: none;
            color: black;
        }
        .maincat a {
            padding-left: 2rem;
        }
</style>

<div class="container" style="margin-top:100px;">
    <!-- 麵包屑--start -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/Home">首頁</a></li>
            <li class="breadcrumb-item active" aria-current="page">全站分類</li>
        </ol>
    </nav>
    <!-- 麵包屑--end -->
    <h4 itemprop="name">全站分類</h4>
    <div class="row">
        <!-- Sidebar start -->
        <div class="list-group list-group-flush col-md-2 category-sidebar">


            @foreach (var parentGroup in Model.GroupBy(x => x.ParentCategoryName))
            {
                <ul>
                    <li class="list-group-item list-group-item-action subcat"><a href="#">@parentGroup.Key</a></li>

                    @foreach (var category in parentGroup)
                    {
                        <li class="list-group-item list-group-item-action maincat"><a href="#">@category.CategoryName</a></li>
                    }
                </ul>
            }

        </div>
        <!-- Sidebar end -->

        <!-- Cart start -->
        <div class="cart col-md-10">
            @foreach (var var item in Model){
                @foreach (var parentGroup in Model.GroupBy(x => x.ParentCategoryName))
                {
                    <div class=" row justify-content-center">
                        <div class="row">
                            <h4 class="col-11">@parentGroup.Key</h4>
                            <a href="#" class="btn btn-light btn-sm col-auto">More></a>
                        </div>
                        @foreach (var product in parentGroup.Take(5))
                        {
                            <div class="card border-0 col-auto m-2" style="width: 11rem;">
                                <img src="images/chris-nt9R3r0zHgY-unsplash.jpg" class="card-img-top" alt="...">
                                <div class="card-body">
                                    <h5 class="card-title text-center">@product.Data</h5>
                                    <p class="card-text text-center">$ 999</p>
                                    <a href="#" class="btn btn-primary d-block mx-auto">Detail</a>
                                </div>
                            </div>

                        }
                    </div>
                    <hr>
                }
            }

        </div>
        <h2>Index</h2>

        <hr />
        <table class="table">
            <tr>
                <th>Category</th>
                <th>ParentCategory</th>
                <th>Title</th>
                <th>Author</th>
                <th>Price</th>
                <th>Image</th>
            </tr>

            @foreach (var item in Model)
            {
                foreach (var product in item.Data)
                {
                    <tr>
                        <td>
                            @item.CategoryName
                        </td>
                        <td>
                            @item.ParentCategoryName
                        </td>
                        <td>
                            @product.Title
                        </td>
                        <td>
                            @product.Author
                        </td>
                        <td>
                            @product.Price.ToString("N0")
                        </td>
                        <td>
                            <img src="@product.ImageURL" alt="Product Image" style="width: 50px;" />
                        </td>
                    </tr>
                }
            }

        </table>
